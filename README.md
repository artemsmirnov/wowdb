# wowdb

## Технологический стёк

В качестве языка запросов используется открытая реализация es5.1 - duktape. Выбор пал на него потому что он предоставляет мощные возможности в обработке данных и так было быстрее.

Для работы с базой доступны api

```
store {
  object createObject()
  array createArray()
}

object {
  bool has(key)
  put(key, value)
  value get(key)
  remove(key)
  [key] keys()
}

array {
  int length()
  value at(int)
  insert_at(int, value)
  remove(int)
}
```

Запрос представляет из себя функцию которая принимает как аргументы (store, root, params) где root это корневой объект базы. Также передаются параметры запроса `params` закодированые в формате json

В качестве транспортного протокола используется http в связи с его доступностью и наличием реализации клиента практически в каждом язык.

В качестве движка базы данных используется leveldb т.к. данные в нем хранятся в структуре которая позволяет добится оптимальной производительности на выбраной структуре хранения данных.

## Структура хранени данных

Для каждого значения с идентификатором id хранится информация о его типе под ключом `{id}$$type` и может быть `object | array | string | number`

Для чисел и строк непосредственно значения хранятся в ключе `id`

Для объектов по каждому полю field у объекта под ключом id хранится информация о значении в ключе `{id}.{field}`

Для массивов в ключе `id` хранится список идентификаторо разделеных запятыми
